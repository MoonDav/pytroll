

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Quickstart &mdash; Pytroll</title>
    <link rel="stylesheet" href="static/agogo.css" type="text/css" />
    <link rel="stylesheet" href="static/pygments.css" type="text/css" />
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '',
        VERSION:     '1.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="static/jquery.js"></script>
    <script type="text/javascript" src="static/underscore.js"></script>
    <script type="text/javascript" src="static/doctools.js"></script>
    <link rel="top" title="Pytroll" href="index.html" />
    <link rel="next" title="Recipes: Operational Pytroll" href="recipes.html" />
    <link rel="prev" title="Installation and configuration" href="install.html" /> 
  </head>
  <body>
    <div class="header-wrapper">
      <div class="header">
        <h1><a href="index.html">Pytroll</a></h1>
        <div class="rel">
          <a href="install.html" title="Installation and configuration"
             accesskey="P">previous</a> |
          <a href="recipes.html" title="Recipes: Operational Pytroll"
             accesskey="N">next</a> |
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a>
        </div>
       </div>
    </div>

    <div class="content-wrapper">
      <div class="content">
        <div class="document">
            
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="quickstart">
<h1>Quickstart<a class="headerlink" href="#quickstart" title="Permalink to this headline">¶</a></h1>
<p>The software uses OOP extensively, to allow higher level metaobject handling.</p>
<p>For this tutorial, we will use the Meteosat data, read it through mipp into
mpop, resample it with pyresample and process it a bit.</p>
<p>Don&#8217;t forget to setup your PYTHONPATH so that all dependencies are reachable.</p>
<div class="section" id="first-example">
<h2>First example<a class="headerlink" href="#first-example" title="Permalink to this headline">¶</a></h2>
<p>Ok, let&#8217;s get it on:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">mpop.satellites</span> <span class="kn">import</span> <span class="n">GeostationaryFactory</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">mpop.projector</span> <span class="kn">import</span> <span class="n">get_area_def</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">datetime</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">time_slot</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="p">(</span><span class="mi">2009</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">14</span><span class="p">,</span> <span class="mi">30</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">global_data</span> <span class="o">=</span> <span class="n">GeostationaryFactory</span><span class="o">.</span><span class="n">create_scene</span><span class="p">(</span><span class="s">&quot;meteosat&quot;</span><span class="p">,</span> <span class="s">&quot;09&quot;</span><span class="p">,</span> <span class="s">&quot;seviri&quot;</span><span class="p">,</span> <span class="n">time_slot</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">europe</span> <span class="o">=</span> <span class="n">get_area_def</span><span class="p">(</span><span class="s">&quot;EuropeCanary&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">global_data</span><span class="o">.</span><span class="n">load</span><span class="p">([</span><span class="mf">0.6</span><span class="p">,</span> <span class="mf">0.8</span><span class="p">,</span> <span class="mf">10.8</span><span class="p">],</span> <span class="n">area_extent</span><span class="o">=</span><span class="n">europe</span><span class="o">.</span><span class="n">area_extent</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">print</span> <span class="n">global_data</span>
<span class="go">&#39;IR_097: (9.380,9.660,9.940)μm, resolution 3000.40316582m, not loaded&#39;</span>
<span class="go">&#39;IR_016: (1.500,1.640,1.780)μm, resolution 3000.40316582m, not loaded&#39;</span>
<span class="go">&#39;VIS008: (0.740,0.810,0.880)μm, shape (1200, 3000), resolution 3000.40316582m&#39;</span>
<span class="go">&#39;VIS006: (0.560,0.635,0.710)μm, shape (1200, 3000), resolution 3000.40316582m&#39;</span>
<span class="go">&#39;WV_062: (5.350,6.250,7.150)μm, resolution 3000.40316582m, not loaded&#39;</span>
<span class="go">&#39;IR_120: (11.000,12.000,13.000)μm, resolution 3000.40316582m, not loaded&#39;</span>
<span class="go">&#39;WV_073: (6.850,7.350,7.850)μm, resolution 3000.40316582m, not loaded&#39;</span>
<span class="go">&#39;IR_087: (8.300,8.700,9.100)μm, resolution 3000.40316582m, not loaded&#39;</span>
<span class="go">&#39;IR_039: (3.480,3.920,4.360)μm, resolution 3000.40316582m, not loaded&#39;</span>
<span class="go">&#39;HRV: (0.500,0.700,0.900)μm, resolution 1000.13434887m, not loaded&#39;</span>
<span class="go">&#39;IR_134: (12.400,13.400,14.400)μm, resolution 3000.40316582m, not loaded&#39;</span>
<span class="go">&#39;IR_108: (9.800,10.800,11.800)μm, shape (1200, 3000), resolution 3000.40316582m&#39;</span>
</pre></div>
</div>
<p>In this example, we create an mpop scene object for the seviri instrument
onboard meteosat 9, specifying the time of the snapshot of interest. The time
is defined as a datetime object.</p>
<p>The next step is loading the data. This is done using mipp, which takes care of
reading the HRIT data, and slicing the data so that we read just what is
needed. Calibration is also done with mipp. In order to slice the data, we
retreive the area we will work on, here set to variable <em>europe</em>.</p>
<p>Here we call the <tt class="xref py py-meth docutils literal"><span class="pre">load()</span></tt> function with a list of the wavelengths of the
channels we are interested in, and the area extent in satellite projection of
the area of interest. Each retrieved channel is the closest in terms of central
wavelength, provided that the required wavelength is within the bounds of the
channel.</p>
<p>The wavelengths are given in micrometers and have to be given as a floating
point number (<em>i.e.</em>, don&#8217;t type &#8216;1&#8217;, but &#8216;1.0&#8217;). Using an integer number
instead returns a channel based on resolution, while using a string retrieves a
channels based on its name.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">img</span> <span class="o">=</span> <span class="n">global_data</span><span class="o">.</span><span class="n">image</span><span class="o">.</span><span class="n">overview</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">img</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="s">&quot;./myoverview.png&quot;</span><span class="p">)</span>
<span class="go">&gt;&gt;&gt;</span>
</pre></div>
</div>
<img alt="images/myoverview.png" src="images/myoverview.png" />
<p>Once the channels are loaded, we generate an overview RGB composite image, and
save it as a png image. Instead of <tt class="xref py py-meth docutils literal"><span class="pre">save()</span></tt>, one could also use
<tt class="xref py py-meth docutils literal"><span class="pre">show()</span></tt> if the only purpose is to display the image on screen.</p>
<p>Available composites are listed in the <tt class="xref py py-mod docutils literal"><span class="pre">mpop.satellites.visir</span></tt> module
in the mpop documentation.</p>
</div>
<div class="section" id="we-want-more">
<h2>We want more !<a class="headerlink" href="#we-want-more" title="Permalink to this headline">¶</a></h2>
<p>In the last example, the composite generation worked because the channels
needed for the overview (0.6, 0.8, 10.8 μm) were loaded. If we try to generate
a day natural color composite, which requires also the 1.6um channel, it will
result in an error:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">img</span> <span class="o">=</span> <span class="n">global_data</span><span class="o">.</span><span class="n">image</span><span class="o">.</span><span class="n">natural</span><span class="p">()</span>
<span class="gt">Traceback (most recent call last):</span>
  <span class="c">...</span>
<span class="gr">NotLoadedError</span>: <span class="n">Required channel 1.63 not loaded, aborting.</span>
</pre></div>
</div>
<p>So it means that we have to load the missing channel first. To do this we could
enter the channels list to load manually, as we did for the overview, but we
provide a way to get the list of channels needed by a given method using the
<cite>prerequisites</cite> method attribute:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">global_data</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">global_data</span><span class="o">.</span><span class="n">image</span><span class="o">.</span><span class="n">natural</span><span class="o">.</span><span class="n">prerequisites</span><span class="p">,</span> <span class="n">area_extent</span><span class="o">=</span><span class="n">europe</span><span class="o">.</span><span class="n">area_extent</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">img</span> <span class="o">=</span> <span class="n">global_data</span><span class="o">.</span><span class="n">image</span><span class="o">.</span><span class="n">natural</span><span class="p">()</span>
<span class="go">&gt;&gt;&gt;</span>
</pre></div>
</div>
<p>Now you can save the image:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">img</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="s">&quot;./mynaturalcolors.png&quot;</span><span class="p">)</span>
<span class="go">&gt;&gt;&gt;</span>
</pre></div>
</div>
<img alt="images/mynaturalcolors.png" src="images/mynaturalcolors.png" />
<p>If you want to combine several prerequisites for channel loading, since
prerequisites are python sets, you can do:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">global_data</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">global_data</span><span class="o">.</span><span class="n">image</span><span class="o">.</span><span class="n">overview</span><span class="o">.</span><span class="n">prerequisites</span> <span class="o">|</span>
<span class="gp">... </span>                 <span class="n">global_data</span><span class="o">.</span><span class="n">image</span><span class="o">.</span><span class="n">natural</span><span class="o">.</span><span class="n">prerequisites</span><span class="p">,</span>
<span class="gp">... </span>                 <span class="n">area_extent</span><span class="o">=</span><span class="n">europe</span><span class="o">.</span><span class="n">area_extent</span><span class="p">)</span>
<span class="go">&gt;&gt;&gt;</span>
</pre></div>
</div>
<p>and add as many <cite>| global_data.image.mymethod.prerequisites</cite> as needed.</p>
</div>
<div class="section" id="retrieving-channels">
<h2>Retrieving channels<a class="headerlink" href="#retrieving-channels" title="Permalink to this headline">¶</a></h2>
<p>Retrieving channels is dead easy. From the center wavelength:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="k">print</span> <span class="n">global_data</span><span class="p">[</span><span class="mf">0.6</span><span class="p">]</span>
<span class="go">&#39;VIS006: (0.560,0.635,0.710)μm, shape (1200, 3000), resolution 3000.40316582m&#39;</span>
</pre></div>
</div>
<p>or from the channel name:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="k">print</span> <span class="n">global_data</span><span class="p">[</span><span class="s">&quot;VIS006&quot;</span><span class="p">]</span>
<span class="go">&#39;VIS006: (0.560,0.635,0.710)μm, shape (1200, 3000), resolution 3000.40316582m&#39;</span>
</pre></div>
</div>
<p>or from the resolution:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="k">print</span> <span class="n">global_data</span><span class="p">[</span><span class="mi">3000</span><span class="p">]</span>
<span class="go">&#39;VIS006: (0.560,0.635,0.710)μm, shape (1200, 3000), resolution 3000.40316582m&#39;</span>
</pre></div>
</div>
<p>or more than one at the time:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="k">print</span> <span class="n">global_data</span><span class="p">[</span><span class="mi">3000</span><span class="p">,</span> <span class="mf">0.8</span><span class="p">]</span>
<span class="go">&#39;VIS008: (0.740,0.810,0.880)μm, shape (1200, 3000), resolution 3000.40316582m&#39;</span>
</pre></div>
</div>
<p>The printed lines consists of the following values:</p>
<ul class="simple">
<li>First the name is displayed,</li>
<li>then the triplet gives the min-, center-, and max-wavelength of the
channel,</li>
<li>follows the shape of the loaded data, or <cite>None</cite> if the data is not loaded,</li>
<li>and finally the theoretical resolution of the channel is shown.</li>
</ul>
<p>The data of the channel can be retrieved as an numpy (masked) array using the
data property:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="k">print</span> <span class="n">global_data</span><span class="p">[</span><span class="mf">0.6</span><span class="p">]</span><span class="o">.</span><span class="n">data</span>
<span class="go">[[-- -- -- ..., -- -- --]</span>
<span class="go"> [-- -- -- ..., -- -- --]</span>
<span class="go"> [-- -- -- ..., -- -- --]</span>
<span class="go"> ...,</span>
<span class="go"> [7.37684259374 8.65549530999 6.58997938374 ..., 0.29507370375 0.1967158025</span>
<span class="go">  0.1967158025]</span>
<span class="go"> [7.18012679124 7.86863209999 6.19654777874 ..., 0.29507370375</span>
<span class="go">  0.29507370375 0.29507370375]</span>
<span class="go"> [5.80311617374 7.57355839624 6.88505308749 ..., 0.29507370375</span>
<span class="go">  0.29507370375 0.29507370375]]</span>
</pre></div>
</div>
<p>Channels can be viewed with the <tt class="xref py py-meth docutils literal"><span class="pre">show()</span></tt> method:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">global_data</span><span class="p">[</span><span class="mf">0.6</span><span class="p">]</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
<img alt="images/ch6.png" src="images/ch6.png" />
</div>
<div class="section" id="channel-arithmetics">
<h2>Channel arithmetics<a class="headerlink" href="#channel-arithmetics" title="Permalink to this headline">¶</a></h2>
<p>The common arithmetical operators are supported on channels, so that one can
run for example:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">cool_channel</span> <span class="o">=</span> <span class="p">(</span><span class="n">global_data</span><span class="p">[</span><span class="mf">0.6</span><span class="p">]</span> <span class="o">-</span> <span class="n">global_data</span><span class="p">[</span><span class="mf">0.8</span><span class="p">])</span> <span class="o">*</span> <span class="n">global_data</span><span class="p">[</span><span class="mf">10.8</span><span class="p">]</span>
</pre></div>
</div>
</div>
<div class="section" id="other-types-of-channels">
<h2>Other types of channels<a class="headerlink" href="#other-types-of-channels" title="Permalink to this headline">¶</a></h2>
<p>Other kinds of channels can be used also. For example, PGEs which have been
produced by nwcsaf PPS or MSG from the satellite data can be loaded in exactly
the same fashion as with regular channels:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">global_data</span><span class="o">.</span><span class="n">area</span> <span class="o">=</span> <span class="s">&quot;EuropeCanary&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">global_data</span><span class="o">.</span><span class="n">load</span><span class="p">([</span><span class="s">&quot;CTTH&quot;</span><span class="p">])</span>
<span class="go">&gt;&gt;&gt;</span>
</pre></div>
</div>
<p>and they can be retrieved as simply as before:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="k">print</span> <span class="n">global_data</span><span class="p">[</span><span class="s">&quot;CTTH&quot;</span><span class="p">]</span>
<span class="go">&#39;CTTH: shape (1200, 3000), resolution 3000.40316582m&#39;</span>
</pre></div>
</div>
</div>
<div class="section" id="making-custom-composites">
<h2>Making custom composites<a class="headerlink" href="#making-custom-composites" title="Permalink to this headline">¶</a></h2>
<p>Building custom composites makes use of the <tt class="xref py py-mod docutils literal"><span class="pre">imageo</span></tt> module. For example,
building an overview composite can be done manually with:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">mpop.imageo.geo_image</span> <span class="kn">import</span> <span class="n">GeoImage</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">img</span> <span class="o">=</span> <span class="n">GeoImage</span><span class="p">((</span><span class="n">global_data</span><span class="p">[</span><span class="mf">0.6</span><span class="p">]</span><span class="o">.</span><span class="n">data</span><span class="p">,</span>
<span class="gp">... </span>                <span class="n">global_data</span><span class="p">[</span><span class="mf">0.8</span><span class="p">]</span><span class="o">.</span><span class="n">data</span><span class="p">,</span>
<span class="gp">... </span>                <span class="o">-</span><span class="n">global_data</span><span class="p">[</span><span class="mf">10.8</span><span class="p">]</span><span class="o">.</span><span class="n">data</span><span class="p">),</span>
<span class="gp">... </span>                <span class="s">&quot;EuropeCanary&quot;</span><span class="p">,</span>
<span class="gp">... </span>                <span class="n">time_slot</span><span class="p">,</span>
<span class="gp">... </span>                <span class="n">mode</span> <span class="o">=</span> <span class="s">&quot;RGB&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">img</span><span class="o">.</span><span class="n">enhance</span><span class="p">(</span><span class="n">stretch</span><span class="o">=</span><span class="s">&quot;crude&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">img</span><span class="o">.</span><span class="n">enhance</span><span class="p">(</span><span class="n">gamma</span><span class="o">=</span><span class="mf">1.7</span><span class="p">)</span>
</pre></div>
</div>
<p>In order to have mpop automatically use the composites you create, it is
possible to write them in a python module which name has to be specified in the
<cite>mpop.cfg</cite> configuration file, under the <em>composites</em> section:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="p">[</span><span class="n">composites</span><span class="p">]</span>
<span class="n">module</span><span class="o">=</span><span class="n">smhi_composites</span>
</pre></div>
</div>
<p>The module has to be importable (i.e. it has to be in the pythonpath).
Here is an example of such a module:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="k">def</span> <span class="nf">overview</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Make an overview RGB image composite.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">check_channels</span><span class="p">(</span><span class="mf">0.635</span><span class="p">,</span> <span class="mf">0.85</span><span class="p">,</span> <span class="mf">10.8</span><span class="p">)</span>

    <span class="n">ch1</span> <span class="o">=</span> <span class="bp">self</span><span class="p">[</span><span class="mf">0.635</span><span class="p">]</span><span class="o">.</span><span class="n">check_range</span><span class="p">()</span>
    <span class="n">ch2</span> <span class="o">=</span> <span class="bp">self</span><span class="p">[</span><span class="mf">0.85</span><span class="p">]</span><span class="o">.</span><span class="n">check_range</span><span class="p">()</span>
    <span class="n">ch3</span> <span class="o">=</span> <span class="o">-</span><span class="bp">self</span><span class="p">[</span><span class="mf">10.8</span><span class="p">]</span><span class="o">.</span><span class="n">data</span>

    <span class="n">img</span> <span class="o">=</span> <span class="n">geo_image</span><span class="o">.</span><span class="n">GeoImage</span><span class="p">((</span><span class="n">ch1</span><span class="p">,</span> <span class="n">ch2</span><span class="p">,</span> <span class="n">ch3</span><span class="p">),</span>
                             <span class="bp">self</span><span class="o">.</span><span class="n">area</span><span class="p">,</span>
                             <span class="bp">self</span><span class="o">.</span><span class="n">time_slot</span><span class="p">,</span>
                             <span class="n">fill_value</span><span class="o">=</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span>
                             <span class="n">mode</span><span class="o">=</span><span class="s">&quot;RGB&quot;</span><span class="p">)</span>

    <span class="n">img</span><span class="o">.</span><span class="n">enhance</span><span class="p">(</span><span class="n">stretch</span> <span class="o">=</span> <span class="p">(</span><span class="mf">0.005</span><span class="p">,</span> <span class="mf">0.005</span><span class="p">))</span>

    <span class="k">return</span> <span class="n">img</span>

<span class="n">overview</span><span class="o">.</span><span class="n">prerequisites</span> <span class="o">=</span> <span class="nb">set</span><span class="p">([</span><span class="mf">0.6</span><span class="p">,</span> <span class="mf">0.8</span><span class="p">,</span> <span class="mf">10.8</span><span class="p">])</span>

<span class="k">def</span> <span class="nf">hr_visual</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Make a High Resolution visual BW image composite from Seviri</span>
<span class="sd">    channel.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">check_channels</span><span class="p">(</span><span class="s">&quot;HRV&quot;</span><span class="p">)</span>

    <span class="n">img</span> <span class="o">=</span> <span class="n">geo_image</span><span class="o">.</span><span class="n">GeoImage</span><span class="p">(</span><span class="bp">self</span><span class="p">[</span><span class="s">&quot;HRV&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">data</span><span class="p">,</span>
                             <span class="bp">self</span><span class="o">.</span><span class="n">area</span><span class="p">,</span>
                             <span class="bp">self</span><span class="o">.</span><span class="n">time_slot</span><span class="p">,</span>
                             <span class="n">fill_value</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
                             <span class="n">mode</span><span class="o">=</span><span class="s">&quot;L&quot;</span><span class="p">)</span>
    <span class="n">img</span><span class="o">.</span><span class="n">enhance</span><span class="p">(</span><span class="n">stretch</span><span class="o">=</span><span class="s">&quot;crude&quot;</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">img</span>

<span class="n">hr_visual</span><span class="o">.</span><span class="n">prerequisites</span> <span class="o">=</span> <span class="nb">set</span><span class="p">([</span><span class="s">&quot;HRV&quot;</span><span class="p">])</span>

<span class="n">seviri</span> <span class="o">=</span> <span class="p">[</span><span class="n">overview</span><span class="p">,</span>
          <span class="n">hr_visual</span><span class="p">]</span>
</pre></div>
</div>
<p>Note the <em>seviri</em> variable in the end. This means that the composites it
contains will be available to all scenes using the Seviri instrument. If we
replace this by:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">meteosat09seviri</span> <span class="o">=</span> <span class="p">[</span><span class="n">overview</span><span class="p">,</span>
                    <span class="n">hr_visual</span><span class="p">]</span>
</pre></div>
</div>
<p>then the composites will only be available for the Meteosat 9 satellite scenes.</p>
</div>
<div class="section" id="projections">
<h2>Projections<a class="headerlink" href="#projections" title="Permalink to this headline">¶</a></h2>
<p>Until now, we have used the channels directly as provided by the satellite,
that is in satellite projection. Generating composites thus produces views in
satellite projection, <em>i.e.</em> as viewed by the satellite.</p>
<p>Most often however, we will want to project the data onto a specific area so
that only the area of interest is depicted in the RGB composites.</p>
<p>Here is how we do that:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">local_data</span> <span class="o">=</span> <span class="n">global_data</span><span class="o">.</span><span class="n">project</span><span class="p">(</span><span class="s">&quot;eurol&quot;</span><span class="p">)</span>
<span class="go">&gt;&gt;&gt;</span>
</pre></div>
</div>
<p>Now we have projected data onto the &#8220;eurol&#8221; area in the <cite>local_data</cite> variable
and we can operate as before to generate and play with RGB composites:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">img</span> <span class="o">=</span> <span class="n">local_data</span><span class="o">.</span><span class="n">image</span><span class="o">.</span><span class="n">overview</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">img</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="s">&quot;./local_overview.tif&quot;</span><span class="p">)</span>
<span class="go">&gt;&gt;&gt;</span>
</pre></div>
</div>
<img alt="images/local_overview.png" src="images/local_overview.png" />
<p>The image is saved here in <a class="reference external" href="http://trac.osgeo.org/geotiff/">GeoTiff</a> format.</p>
<p>On projected images, one can also add contour overlay with the
<tt class="xref py py-meth docutils literal"><span class="pre">imageo.geo_image.add_overlay()</span></tt>.</p>
<p class="rubric">Footnotes</p>
<table class="docutils footnote" frame="void" id="f1" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label">[1]</td><td>PGEs supported for Meteosat : CloudType and CTTH</td></tr>
</tbody>
</table>
</div>
</div>


          </div>
        </div>
      </div>
        </div>
        <div class="sidebar">
          <h3>Table Of Contents</h3>
          <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="install.html">Installation and configuration</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="">Quickstart</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#first-example">First example</a></li>
<li class="toctree-l2"><a class="reference internal" href="#we-want-more">We want more !</a></li>
<li class="toctree-l2"><a class="reference internal" href="#retrieving-channels">Retrieving channels</a></li>
<li class="toctree-l2"><a class="reference internal" href="#channel-arithmetics">Channel arithmetics</a></li>
<li class="toctree-l2"><a class="reference internal" href="#other-types-of-channels">Other types of channels</a></li>
<li class="toctree-l2"><a class="reference internal" href="#making-custom-composites">Making custom composites</a></li>
<li class="toctree-l2"><a class="reference internal" href="#projections">Projections</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="recipes.html">Recipes: Operational Pytroll</a></li>
</ul>

          <h3 style="margin-top: 1.5em;">Search</h3>
          <form class="search" action="search.html" method="get">
            <input type="text" name="q" size="18" />
            <input type="submit" value="Go" />
            <input type="hidden" name="check_keywords" value="yes" />
            <input type="hidden" name="area" value="default" />
          </form>
          <p class="searchtip" style="font-size: 90%">
            Enter search terms or a module, class or function name.
          </p>
        </div>
        <div class="clearer"></div>
      </div>
    </div>

    <div class="footer-wrapper">
      <div class="footer">
        <div class="left">
          <a href="install.html" title="Installation and configuration"
             >previous</a> |
          <a href="recipes.html" title="Recipes: Operational Pytroll"
             >next</a> |
          <a href="genindex.html" title="General Index"
             >index</a>
            <br/>
            <a href="sources/quickstart.txt"
               rel="nofollow">Show Source</a>
        </div>

        <div class="right">
          
    <div class="footer">
        &copy; Copyright 2011, pytroll crew.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.0.7.
    </div>
        </div>
        <div class="clearer"></div>
      </div>
    </div>

  </body>
</html>